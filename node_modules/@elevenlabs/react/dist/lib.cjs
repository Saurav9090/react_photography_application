var n=require("react"),e=require("@elevenlabs/client");function t(){return t=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var r in t)({}).hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},t.apply(null,arguments)}var r=["micMuted","volume","serverLocation"];function o(n){switch(void 0===n&&(n="us"),n){case"eu-residency":case"in-residency":case"us":case"global":return n;default:return console.warn("[ConversationalAI] Invalid server-location: "+n+'. Defaulting to "us"'),"us"}}function u(n){return{us:"wss://api.elevenlabs.io","eu-residency":"wss://api.eu.residency.elevenlabs.io","in-residency":"wss://api.in.residency.elevenlabs.io",global:"wss://api.elevenlabs.io"}[n]}function l(n){return{us:"wss://livekit.rtc.elevenlabs.io","eu-residency":"wss://livekit.rtc.eu.residency.elevenlabs.io","in-residency":"wss://livekit.rtc.in.residency.elevenlabs.io",global:"wss://livekit.rtc.elevenlabs.io"}[n]}Object.defineProperty(exports,"postOverallFeedback",{enumerable:!0,get:function(){return e.postOverallFeedback}}),exports.getLivekitUrlForLocation=l,exports.getOriginForLocation=u,exports.parseLocation=o,exports.useConversation=function(i){void 0===i&&(i={});var s=i.micMuted,c=i.volume,a=i.serverLocation,v=function(n,e){if(null==n)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(-1!==e.indexOf(r))continue;t[r]=n[r]}return t}(i,r),d=n.useRef(null),f=n.useRef(null),g=n.useState("disconnected"),p=g[0],h=g[1],C=n.useState(!1),b=C[0],m=C[1],y=n.useState("listening"),M=y[0],P=y[1],S=n.useRef(s),I=n.useRef(c);return S.current=s,I.current=c,n.useEffect(function(){var n;void 0!==s&&(null==d||null==(n=d.current)||n.setMicMuted(s))},[s]),n.useEffect(function(){var n;void 0!==c&&(null==d||null==(n=d.current)||n.setVolume({volume:c}))},[c]),n.useEffect(function(){return function(){var n;null==(n=d.current)||n.endSession()}},[]),{startSession:function(n){try{var r,i,s=function(r){return i?r:function(r,i){try{var s=(O=u(A=o((null==n?void 0:n.serverLocation)||a)),F=l(A),f.current=e.Conversation.startSession(t({},null!=v?v:{},null!=n?n:{},{origin:O,livekitUrl:F,overrides:t({},null!=(c=null==v?void 0:v.overrides)?c:{},null!=(g=null==n?void 0:n.overrides)?g:{},{client:t({},null!=(p=null==v||null==(C=v.overrides)?void 0:C.client)?p:{},null!=(b=null==n||null==(y=n.overrides)?void 0:y.client)?b:{},{source:(null==n||null==(M=n.overrides)||null==(M=M.client)?void 0:M.source)||(null==v||null==(k=v.overrides)||null==(k=k.client)?void 0:k.source)||"react_sdk",version:(null==n||null==(w=n.overrides)||null==(w=w.client)?void 0:w.version)||(null==v||null==(D=v.overrides)||null==(D=D.client)?void 0:D.version)||"0.8.1"})}),onConnect:(null==n?void 0:n.onConnect)||(null==v?void 0:v.onConnect),onDisconnect:(null==n?void 0:n.onDisconnect)||(null==v?void 0:v.onDisconnect),onError:(null==n?void 0:n.onError)||(null==v?void 0:v.onError),onMessage:(null==n?void 0:n.onMessage)||(null==v?void 0:v.onMessage),onAudio:(null==n?void 0:n.onAudio)||(null==v?void 0:v.onAudio),onDebug:(null==n?void 0:n.onDebug)||(null==v?void 0:v.onDebug),onUnhandledClientToolCall:(null==n?void 0:n.onUnhandledClientToolCall)||(null==v?void 0:v.onUnhandledClientToolCall),onVadScore:(null==n?void 0:n.onVadScore)||(null==v?void 0:v.onVadScore),onInterruption:(null==n?void 0:n.onInterruption)||(null==v?void 0:v.onInterruption),onAgentToolResponse:(null==n?void 0:n.onAgentToolResponse)||(null==v?void 0:v.onAgentToolResponse),onConversationMetadata:(null==n?void 0:n.onConversationMetadata)||(null==v?void 0:v.onConversationMetadata),onMCPToolCall:(null==n?void 0:n.onMCPToolCall)||(null==v?void 0:v.onMCPToolCall),onMCPConnectionStatus:(null==n?void 0:n.onMCPConnectionStatus)||(null==v?void 0:v.onMCPConnectionStatus),onAsrInitiationMetadata:(null==n?void 0:n.onAsrInitiationMetadata)||(null==v?void 0:v.onAsrInitiationMetadata),onAgentChatResponsePart:(null==n?void 0:n.onAgentChatResponsePart)||(null==v?void 0:v.onAgentChatResponsePart),onModeChange:function(e){var t,r=e.mode;P(r),null==(t=(null==n?void 0:n.onModeChange)||(null==v?void 0:v.onModeChange))||t({mode:r})},onStatusChange:function(e){var t,r=e.status;h(r),null==(t=(null==n?void 0:n.onStatusChange)||(null==v?void 0:v.onStatusChange))||t({status:r})},onCanSendFeedbackChange:function(e){var t,r=e.canSendFeedback;m(r),null==(t=(null==n?void 0:n.onCanSendFeedbackChange)||(null==v?void 0:v.onCanSendFeedbackChange))||t({canSendFeedback:r})}})),Promise.resolve(f.current).then(function(n){return d.current=n,void 0!==S.current&&d.current.setMicMuted(S.current),void 0!==I.current&&d.current.setVolume({volume:I.current}),d.current.getId()}))}catch(n){return i(!0,n)}var c,g,p,C,b,y,M,k,w,D,A,O,F;return s&&s.then?s.then(i.bind(null,!1),i.bind(null,!0)):i(!1,s)}(0,function(n,e){if(f.current=null,n)throw e;return e})};if(null!=(r=d.current)&&r.isOpen())return Promise.resolve(d.current.getId());var c=function(){if(f.current)return Promise.resolve(f.current).then(function(n){var e=n.getId();return i=1,e})}();return Promise.resolve(c&&c.then?c.then(s):s(c))}catch(n){return Promise.reject(n)}},endSession:function(){try{var n=d.current;return d.current=null,Promise.resolve(null==n?void 0:n.endSession()).then(function(){})}catch(n){return Promise.reject(n)}},setVolume:function(n){var e;null==(e=d.current)||e.setVolume({volume:n.volume})},getInputByteFrequencyData:function(){var n;return null==(n=d.current)?void 0:n.getInputByteFrequencyData()},getOutputByteFrequencyData:function(){var n;return null==(n=d.current)?void 0:n.getOutputByteFrequencyData()},getInputVolume:function(){var n,e;return null!=(n=null==(e=d.current)?void 0:e.getInputVolume())?n:0},getOutputVolume:function(){var n,e;return null!=(n=null==(e=d.current)?void 0:e.getOutputVolume())?n:0},sendFeedback:function(n){var e;null==(e=d.current)||e.sendFeedback(n)},getId:function(){var n;return null==(n=d.current)?void 0:n.getId()},sendContextualUpdate:function(n){var e;null==(e=d.current)||e.sendContextualUpdate(n)},sendUserMessage:function(n){var e;null==(e=d.current)||e.sendUserMessage(n)},sendUserActivity:function(){var n;null==(n=d.current)||n.sendUserActivity()},sendMCPToolApprovalResult:function(n,e){var t;null==(t=d.current)||t.sendMCPToolApprovalResult(n,e)},changeInputDevice:function(n){try{var e,t=function(n){if(e)return n;throw new Error("Device switching is only available for voice conversations")},r=function(){if(d.current&&"changeInputDevice"in d.current)return Promise.resolve(d.current.changeInputDevice(n)).then(function(n){return e=1,n})}();return Promise.resolve(r&&r.then?r.then(t):t(r))}catch(n){return Promise.reject(n)}},changeOutputDevice:function(n){try{var e,t=function(n){if(e)return n;throw new Error("Device switching is only available for voice conversations")},r=function(){if(d.current&&"changeOutputDevice"in d.current)return Promise.resolve(d.current.changeOutputDevice(n)).then(function(n){return e=1,n})}();return Promise.resolve(r&&r.then?r.then(t):t(r))}catch(n){return Promise.reject(n)}},status:p,canSendFeedback:b,micMuted:s,isSpeaking:"speaking"===M}};
//# sourceMappingURL=lib.cjs.map
