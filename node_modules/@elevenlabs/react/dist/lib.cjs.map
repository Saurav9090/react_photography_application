{"version":3,"file":"lib.cjs","sources":["../src/version.ts","../src/index.ts"],"sourcesContent":["// This file is auto-generated during build\nexport const PACKAGE_VERSION = \"0.8.1\";\n","import { useEffect, useRef, useState } from \"react\";\nimport {\n  Conversation,\n  type SessionConfig,\n  type Options,\n  type ClientToolsConfig,\n  type InputConfig,\n  type AudioWorkletConfig,\n  type OutputConfig,\n  type FormatConfig,\n  type Mode,\n  type Status,\n  type Callbacks,\n} from \"@elevenlabs/client\";\n\n// Device configuration types for audio device switching\nexport type DeviceFormatConfig = {\n  format: \"pcm\" | \"ulaw\";\n  sampleRate: number;\n  outputDeviceId?: string;\n};\n\nexport type DeviceInputConfig = {\n  preferHeadphonesForIosDevices?: boolean;\n  inputDeviceId?: string;\n};\n\nimport { PACKAGE_VERSION } from \"./version\";\n\nexport type Location = \"us\" | \"global\" | \"eu-residency\" | \"in-residency\";\n\nexport function parseLocation(location: string = \"us\"): Location {\n  switch (location) {\n    case \"eu-residency\":\n    case \"in-residency\":\n    case \"us\":\n    case \"global\":\n      return location;\n    default:\n      console.warn(\n        `[ConversationalAI] Invalid server-location: ${location}. Defaulting to \"us\"`\n      );\n      return \"us\";\n  }\n}\n\nexport function getOriginForLocation(location: Location): string {\n  const originMap: Record<Location, string> = {\n    us: \"wss://api.elevenlabs.io\",\n    \"eu-residency\": \"wss://api.eu.residency.elevenlabs.io\",\n    \"in-residency\": \"wss://api.in.residency.elevenlabs.io\",\n    global: \"wss://api.elevenlabs.io\",\n  };\n\n  return originMap[location];\n}\n\nexport function getLivekitUrlForLocation(location: Location): string {\n  const livekitUrlMap: Record<Location, string> = {\n    us: \"wss://livekit.rtc.elevenlabs.io\",\n    \"eu-residency\": \"wss://livekit.rtc.eu.residency.elevenlabs.io\",\n    \"in-residency\": \"wss://livekit.rtc.in.residency.elevenlabs.io\",\n    global: \"wss://livekit.rtc.elevenlabs.io\",\n  };\n\n  return livekitUrlMap[location];\n}\n\nexport type {\n  Role,\n  Mode,\n  Status,\n  SessionConfig,\n  DisconnectionDetails,\n  Language,\n  VadScoreEvent,\n  InputConfig,\n  FormatConfig,\n  VoiceConversation,\n  TextConversation,\n  Callbacks,\n} from \"@elevenlabs/client\";\nexport { postOverallFeedback } from \"@elevenlabs/client\";\n\nexport type HookOptions = Partial<\n  SessionConfig &\n    HookCallbacks &\n    ClientToolsConfig &\n    InputConfig &\n    OutputConfig &\n    AudioWorkletConfig &\n    FormatConfig & {\n      serverLocation?: Location | string;\n    }\n>;\nexport type ControlledState = {\n  micMuted?: boolean;\n  volume?: number;\n};\nexport type HookCallbacks = Pick<\n  Callbacks,\n  | \"onConnect\"\n  | \"onDisconnect\"\n  | \"onError\"\n  | \"onMessage\"\n  | \"onAudio\"\n  | \"onModeChange\"\n  | \"onStatusChange\"\n  | \"onCanSendFeedbackChange\"\n  | \"onDebug\"\n  | \"onUnhandledClientToolCall\"\n  | \"onVadScore\"\n  | \"onInterruption\"\n  | \"onAgentToolResponse\"\n  | \"onConversationMetadata\"\n  | \"onMCPToolCall\"\n  | \"onMCPConnectionStatus\"\n  | \"onAsrInitiationMetadata\"\n  | \"onAgentChatResponsePart\"\n>;\n\nexport function useConversation<T extends HookOptions & ControlledState>(\n  props: T = {} as T\n) {\n  const { micMuted, volume, serverLocation, ...defaultOptions } = props;\n  const conversationRef = useRef<Conversation | null>(null);\n  const lockRef = useRef<Promise<Conversation> | null>(null);\n  const [status, setStatus] = useState<Status>(\"disconnected\");\n  const [canSendFeedback, setCanSendFeedback] = useState(false);\n  const [mode, setMode] = useState<Mode>(\"listening\");\n\n  const micMutedRef = useRef<boolean | undefined>(micMuted);\n  const volumeRef = useRef<number | undefined>(volume);\n\n  micMutedRef.current = micMuted;\n  volumeRef.current = volume;\n\n  useEffect(() => {\n    if (micMuted !== undefined) {\n      conversationRef?.current?.setMicMuted(micMuted);\n    }\n  }, [micMuted]);\n\n  useEffect(() => {\n    if (volume !== undefined) {\n      conversationRef?.current?.setVolume({ volume });\n    }\n  }, [volume]);\n\n  useEffect(() => {\n    return () => {\n      conversationRef.current?.endSession();\n    };\n  }, []);\n\n  return {\n    startSession: (async (options?: HookOptions) => {\n      if (conversationRef.current?.isOpen()) {\n        return conversationRef.current.getId();\n      }\n\n      if (lockRef.current) {\n        const conversation = await lockRef.current;\n        return conversation.getId();\n      }\n\n      try {\n        const resolvedServerLocation = parseLocation(\n          options?.serverLocation || serverLocation\n        );\n        const origin = getOriginForLocation(resolvedServerLocation);\n        const livekitUrl = getLivekitUrlForLocation(resolvedServerLocation);\n\n        lockRef.current = Conversation.startSession({\n          ...(defaultOptions ?? {}),\n          ...(options ?? {}),\n          origin,\n          livekitUrl,\n          overrides: {\n            ...(defaultOptions?.overrides ?? {}),\n            ...(options?.overrides ?? {}),\n            client: {\n              ...(defaultOptions?.overrides?.client ?? {}),\n              ...(options?.overrides?.client ?? {}),\n              source:\n                options?.overrides?.client?.source ||\n                defaultOptions?.overrides?.client?.source ||\n                \"react_sdk\",\n              version:\n                options?.overrides?.client?.version ||\n                defaultOptions?.overrides?.client?.version ||\n                PACKAGE_VERSION,\n            },\n          },\n          // Pass through user-provided callbacks\n          onConnect: options?.onConnect || defaultOptions?.onConnect,\n          onDisconnect: options?.onDisconnect || defaultOptions?.onDisconnect,\n          onError: options?.onError || defaultOptions?.onError,\n          onMessage: options?.onMessage || defaultOptions?.onMessage,\n          onAudio: options?.onAudio || defaultOptions?.onAudio,\n          onDebug: options?.onDebug || defaultOptions?.onDebug,\n          onUnhandledClientToolCall:\n            options?.onUnhandledClientToolCall ||\n            defaultOptions?.onUnhandledClientToolCall,\n          onVadScore: options?.onVadScore || defaultOptions?.onVadScore,\n          onInterruption:\n            options?.onInterruption || defaultOptions?.onInterruption,\n          onAgentToolResponse:\n            options?.onAgentToolResponse || defaultOptions?.onAgentToolResponse,\n          onConversationMetadata:\n            options?.onConversationMetadata ||\n            defaultOptions?.onConversationMetadata,\n          onMCPToolCall:\n            options?.onMCPToolCall || defaultOptions?.onMCPToolCall,\n          onMCPConnectionStatus:\n            options?.onMCPConnectionStatus ||\n            defaultOptions?.onMCPConnectionStatus,\n          onAsrInitiationMetadata:\n            options?.onAsrInitiationMetadata ||\n            defaultOptions?.onAsrInitiationMetadata,\n          onAgentChatResponsePart:\n            options?.onAgentChatResponsePart ||\n            defaultOptions?.onAgentChatResponsePart,\n          onModeChange: ({ mode }) => {\n            setMode(mode);\n            (options?.onModeChange || defaultOptions?.onModeChange)?.({ mode });\n          },\n          onStatusChange: ({ status }) => {\n            setStatus(status);\n            (options?.onStatusChange || defaultOptions?.onStatusChange)?.({\n              status,\n            });\n          },\n          onCanSendFeedbackChange: ({ canSendFeedback }) => {\n            setCanSendFeedback(canSendFeedback);\n            (\n              options?.onCanSendFeedbackChange ||\n              defaultOptions?.onCanSendFeedbackChange\n            )?.({ canSendFeedback });\n          },\n        } as Options);\n\n        conversationRef.current = await lockRef.current;\n        // Persist controlled state between sessions using refs to get current values\n        if (micMutedRef.current !== undefined) {\n          conversationRef.current.setMicMuted(micMutedRef.current);\n        }\n        if (volumeRef.current !== undefined) {\n          conversationRef.current.setVolume({ volume: volumeRef.current });\n        }\n\n        return conversationRef.current.getId();\n      } finally {\n        lockRef.current = null;\n      }\n    }) as T extends SessionConfig\n      ? (options?: HookOptions) => Promise<string>\n      : (options: SessionConfig & HookOptions) => Promise<string>,\n    endSession: async () => {\n      const conversation = conversationRef.current;\n      conversationRef.current = null;\n      await conversation?.endSession();\n    },\n    setVolume: ({ volume }: { volume: number }) => {\n      conversationRef.current?.setVolume({ volume });\n    },\n    getInputByteFrequencyData: () => {\n      return conversationRef.current?.getInputByteFrequencyData();\n    },\n    getOutputByteFrequencyData: () => {\n      return conversationRef.current?.getOutputByteFrequencyData();\n    },\n    getInputVolume: () => {\n      return conversationRef.current?.getInputVolume() ?? 0;\n    },\n    getOutputVolume: () => {\n      return conversationRef.current?.getOutputVolume() ?? 0;\n    },\n    sendFeedback: (like: boolean) => {\n      conversationRef.current?.sendFeedback(like);\n    },\n    getId: () => {\n      return conversationRef.current?.getId();\n    },\n    sendContextualUpdate: (text: string) => {\n      conversationRef.current?.sendContextualUpdate(text);\n    },\n    sendUserMessage: (text: string) => {\n      conversationRef.current?.sendUserMessage(text);\n    },\n    sendUserActivity: () => {\n      conversationRef.current?.sendUserActivity();\n    },\n    sendMCPToolApprovalResult: (toolCallId: string, isApproved: boolean) => {\n      conversationRef.current?.sendMCPToolApprovalResult(\n        toolCallId,\n        isApproved\n      );\n    },\n    changeInputDevice: async (\n      config: DeviceFormatConfig & DeviceInputConfig\n    ) => {\n      if (\n        conversationRef.current &&\n        \"changeInputDevice\" in conversationRef.current\n      ) {\n        return await (\n          conversationRef.current as unknown as {\n            changeInputDevice: (config: any) => Promise<any>;\n          }\n        ).changeInputDevice(config);\n      }\n      throw new Error(\n        \"Device switching is only available for voice conversations\"\n      );\n    },\n    changeOutputDevice: async (config: DeviceFormatConfig) => {\n      if (\n        conversationRef.current &&\n        \"changeOutputDevice\" in conversationRef.current\n      ) {\n        return await (\n          conversationRef.current as unknown as {\n            changeOutputDevice: (config: any) => Promise<any>;\n          }\n        ).changeOutputDevice(config);\n      }\n      throw new Error(\n        \"Device switching is only available for voice conversations\"\n      );\n    },\n    status,\n    canSendFeedback,\n    micMuted,\n    isSpeaking: mode === \"speaking\",\n  };\n}\n\n// const con = useConversation({agentId: \"\"})\n"],"names":["parseLocation","location","console","warn","getOriginForLocation","us","global","getLivekitUrlForLocation","props","micMuted","volume","serverLocation","defaultOptions","_objectWithoutPropertiesLoose","_excluded","conversationRef","useRef","lockRef","_useState","useState","status","setStatus","_useState2","canSendFeedback","setCanSendFeedback","_useState3","mode","setMode","micMutedRef","volumeRef","current","useEffect","_conversationRef$curr","undefined","setMicMuted","_conversationRef$curr2","setVolume","_conversationRef$curr3","endSession","startSession","options","_conversationRef$curr4","_exit","_temp2","_result","origin","resolvedServerLocation","livekitUrl","Conversation","_extends","overrides","_defaultOptions$overr","_options$overrides","client","_defaultOptions$overr2","_defaultOptions$overr3","_options$overrides$cl","_options$overrides2","source","_options$overrides3","_defaultOptions$overr4","version","_options$overrides4","_defaultOptions$overr5","onConnect","onDisconnect","onError","onMessage","onAudio","onDebug","onUnhandledClientToolCall","onVadScore","onInterruption","onAgentToolResponse","onConversationMetadata","onMCPToolCall","onMCPConnectionStatus","onAsrInitiationMetadata","onAgentChatResponsePart","onModeChange","_ref","_ref2","onStatusChange","_ref3","_ref4","onCanSendFeedbackChange","_ref5","_ref6","Promise","resolve","then","_lockRef$current","getId","_finallyRethrows","_wasThrown","_result2","isOpen","_temp","conversation","_conversation$getId","e","reject","_ref7","_conversationRef$curr5","getInputByteFrequencyData","_conversationRef$curr6","getOutputByteFrequencyData","_conversationRef$curr7","getInputVolume","_conversationRef$curr8","_conversationRef$curr9","getOutputVolume","_conversationRef$curr0","_conversationRef$curr1","sendFeedback","like","_conversationRef$curr10","_conversationRef$curr11","sendContextualUpdate","text","_conversationRef$curr12","sendUserMessage","_conversationRef$curr13","sendUserActivity","_conversationRef$curr14","sendMCPToolApprovalResult","toolCallId","isApproved","_conversationRef$curr15","changeInputDevice","config","_exit2","_temp4","_result3","Error","_temp3","_await$conversationRe","changeOutputDevice","_temp6","_exit3","_result4","_temp5","_await$conversationRe2","isSpeaking"],"mappings":"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"}